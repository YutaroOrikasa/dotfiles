#!/bin/bash

# public domain

# emacs on window system
# when window can not be opened, execute emacs on console

for arg in "$@";do
    if [[ "$arg" = -nw ]];then
        emacsclient "$@"
        exit
    fi
done

if graphical_emacs_ok; then
    
    # "<&0" is workaround for carbon emacs
    # without this, carbon emacs will chdir to $HOME on launth
    emacsclient -nc "$@" #<&0 &
else
    emacsclient "$@"
fi
