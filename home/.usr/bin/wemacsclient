#!/bin/bash

# public domain

# emacs on window system
# when window can not be opened, execute emacs on console

for arg in "$@";do
    case "$arg" in
        -nw|-t|--tty)
             emacsclient "$@"
             exit
             ;;
    esac
done

if graphical_emacs_ok; then
    # run emacsclient as background instead of -n (no wait) option
    # so that we can close a buffer opend by wemacsclient with C-x C-c
    emacsclient -c "$@" &>/dev/null &
    disown %1
else
    emacsclient "$@"
fi
